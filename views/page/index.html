{{template "base/base.html" .}} {{ define "body" }}

<div id="dashboard-page" class="bg-gray-light">
	{{ template "base/nav.html" .}}

	<!-- JavaScript jQuery code from Bootply.com editor  -->

	<script type='text/javascript'>
		$(document).ready(function() {
			
			$('#MyWizard').on('change', function(e, data) {
				console.log('change');
				if (data.step === 4 && data.direction === 'next') {
					$('#btnWizardNext').attr('value', 'Done');
				}
			});
			$('#MyWizard').on('changed', function(e, data) {
				console.log('changed');
			});
			$('#MyWizard').on('finished', function(e, data) {
				console.log('finished');
			});
			$('#btnWizardPrev').on('click', function() {
				$('#MyWizard').wizard('previous');
			});
			$('#btnWizardNext').on('click', function() {
				$('#MyWizard').wizard('next', 'foo');
			});
			$('#btnWizardStep').on('click', function() {
				var item = $('#MyWizard').wizard('selectedItem');
				console.log(item.step);
			});
			$('#MyWizard').on('stepclick', function(e, data) {
				console.log('step' + data.step + ' clicked');
				if (data.step === 1) {
					// return e.preventDefault();
				}
			});

			// optionally navigate back to 2nd step
			$('#btnStep2').on('click', function(e, data) {
				$('[data-target=#step2]').trigger("click");
			});
		});
	</script>
	
	<script type='text/javascript'>
	$(document).ready(function() {
		var servers = [ "MEGAM", "COBBLER" ]; 
		var i = 0;
		installProcess(i);
     });
	
	function installProcess(i) {
		var servers = [ "MEGAM", "COBBLER" ]; 
		serverID = servers[i].concat("_waiting1")
    	successID = servers[i].concat("_success")
    	errorID = servers[i].concat("_error")
    	
    	
    //	$('#'+serverID).waiting({ 
	//	    elements: 6, 
	//	    auto: true 
	//	});
	/*	$('#'+serverID).waiting({ 
		className: 'waiting-circles', 
	    elements: 8, 
	    radius: 20, 
	    auto: true 
		});*/
		
		$('#'+serverID).waiting({ 
		    className: 'waiting-blocks', 
		    elements: 5, 
		    speed: 200, 
		    auto: true 
		});
		
//		$('div.demo-container').html('<p>All new content. <em>You bet!</em></p>');
     $('#'+serverID).show(); 
     install_text = servers[i].concat("_install_text");
     $('#'+install_text).show(); 
     progress = servers[i].concat("_PROGRESS");
     $("#"+progress).show();
     $("."+progress).css('width', '50%');
     
      $.ajax({ 
      type: "GET", 
      url:  "/servers/"+servers[i], 
      data: servers[i],
      dataType: "text", 
      cache : false, 
//         jsonp : "onJSONPLoad", 
//         jsonpCallback: "newarticlescallback", 
//         crossDomain: "true", 
      success: function(response) { 
        $('#'+serverID).hide();
        $('#'+install_text).hide(); 
        $('#'+successID).show();
        $("."+progress).css('width', '100%');
        installProcess(i+1);
      }, 
      error: function (xhr, status) {  
        $('#'+serverID).hide();
        $('#'+install_text).hide(); 
        $('#'+errorID).show();
        $("."+progress).css('width', '100%');
        $('#change_'+servers[i]).removeClass('progress-bar-info').addClass('progress-bar-danger');
      }    
   }); 
	}
</script>

	<div class="fuelux">
		<div class="well wizard-example">
			<div id="MyWizard" class="wizard">
				<ul class="steps">
					<li data-target="#step1" class="active"><span
						class="badge badge-info">1</span>Step 1<span class="chevron"></span></li>
					<li data-target="#step2"><span class="badge">2</span>Step 2<span
						class="chevron"></span></li>
					<li data-target="#step3"><span class="badge">3</span>Step 3<span
						class="chevron"></span></li>
					<li data-target="#step4"><span class="badge">4</span>Step 4<span
						class="chevron"></span></li>
					<li data-target="#step5"><span class="badge">5</span>Step 5<span
						class="chevron"></span></li>
				</ul>
				<div class="actions fi-icons">
					<button class="btn btn-mini btn-prev">
						<i class="glyphicon glyphicon-chevron-left"></i>Prev
					</button>
					<button class="btn btn-mini btn-next" data-last="Finish">
						Next<i class="glyphicon glyphicon-chevron-right"></i>
					</button>
				</div>
			</div>
			<div class="step-content">
				<div class="step-pane active" id="step1">
					<div
						class=" tab-content tab-pane active fade in p-30 bg-white b-1px-gray-light b-top-none brad-bottom brad-tr b-bot-2px-gray-light">
						<h1 class="text-center font-w-100">
							Welcome <span class="text-blue">{{.Username}}</span>
						</h1>
						<div class="row">
  						   <p class="m-b-30 p-b-30 text-gray-alt text-uppercase text-center col-lg-12 col-lg-offset-2">Step1 automatically starts the install of MEGAM. On successful completion of megam installation COBBLERD install is started. Click log to watch the progress of the install.</p>
  					   </div>						
						<div class="row">
							<div class="col-sm-12">
								<!-- MESSAGES -->
								<div class="iconmelon m-r-10">
									<svg viewBox="0 0 32 32">
                                     <g filter="">
                                         <use xlink:href="#email-mail"></use>
                                     </g>
                                </svg>
								</div>

								<!-- <a href="messages.html" class="btn-group pull-right">
									<div class="btn btn-alt">
										<i class="glyphicon glyphicon-list text-white"></i>
									</div>
									<div class="btn btn-primary">
										Read all
									</div>
								</a> -->

								<hr class="m-b-0">

								<ul class="unstyled messages">
									<li>
										<div class="row">
											<div class="col-sm-12">
												<span class="col-sm-1"></span> <span class="col-sm-1">
													<i class="glyphicon glyphicon-star m-r-10 text-orange"></i>
												</span> <span class="col-sm-2">Megam</span> <span class="col-sm-4">
													<div class="progress progress-striped" id="MEGAM_PROGRESS" style="display: none">
														<div class="progress-bar progress-bar-info MEGAM_PROGRESS"
															role="progressbar" aria-valuenow="20" aria-valuemin="0"
															aria-valuemax="100" style="width: 0%" id="change_MEGAM">
															<span class="sr-only">20% Complete</span>
														</div>
													</div>
												</span>
												<span class="col-sm-1" id="MEGAM_install_text" style="display: none"><p class="text-info">Installing</p></span>
												<div id="MEGAM_waiting1" class="col-sm-2"></div>
												<div id="MEGAM_success" class="col-sm-2"
													style="display: none"><p class="text-success">Done</p></div>
												<div id="MEGAM_error" class="col-sm-2" style="display: none"><p class="text-danger">Error</p></div>
												<!--  <span class="col-sm-2">Installing...</span> -->
												<span class="col-sm-1"><a href="/servers/megam/log"
													class="btn-group pull-right" target="_blank">
														<div class="btn btn-alt">
															<i class="glyphicon glyphicon-list text-white"></i>
														</div>
														<div class="btn btn-primary">Log</div>
												</a></span>
											</div>
										</div>
									</li>
									<li>
										<div class="row">
											<div class="col-sm-12">
												<span class="col-sm-1"></span> <span class="col-sm-1">
													<i class="glyphicon glyphicon-star m-r-10 text-orange"></i>
												</span> <span class="col-sm-2">Cobblerd</span> <span
													class="col-sm-4">
													<div class="progress progress-striped" id="COBBLER_PROGRESS" style="display: none">
														<div
															class="progress-bar progress-bar-info COBBLER_PROGRESS"
															role="progressbar" aria-valuenow="20" aria-valuemin="0"
															aria-valuemax="100" style="width: 0%" id="change_COBBLER">
															<span class="sr-only">20% Complete</span>
														</div>
													</div>
												</span>
												<span class="col-sm-1"  id="COBBLER_install_text" style="display: none"><p class="text-info">Installing</p></span>
												<div id="COBBLER_waiting1" class="col-sm-2"></div>
												<div id="COBBLER_success" class="col-sm-2"
													style="display: none"><p class="text-success">Done</p></div>
												<div id="COBBLER_error" class="col-sm-2"
													style="display: none"><p class="text-danger">Error</p></div>
												<!-- <span class="col-sm-2">Installing...</span> -->
												<span class="col-sm-1"><a href="/servers/cobbler/log"
													class="btn-group pull-right" target="_blank">
														<div class="btn btn-alt">
															<i class="glyphicon glyphicon-list text-white"></i>
														</div>
														<div class="btn btn-primary">Log</div>
												</a></span>
											</div>
										</div>
									</li>
								</ul>
							</div>
						</div>
					</div>
				</div>
				<div class="step-pane" id="step2">
					<h2>Step 2]</h2>
					Now you are at the 2nd step of this wizard example.<br>
				</div>
				<div class="step-pane" id="step3">
					<h2>Okay</h2>
					Now you are at the 3rd step of this wizard example.<br>
				</div>
				<div class="step-pane" id="step4">
					<h2>Almost Done.</h2>
					Now you are at the 4th step of this wizard example. Click 'Next' to
					finish up.
				</div>
				<div class="step-pane" id="step5">
					<h2>Done!</h2>
					The wizard is complete. Pretty exciting stuff, eh?. <a href="#"
						id="btnStep2">Go back to step 2.</a>
				</div>
			</div>
			<br> <input class="btn" id="btnWizardPrev" value="Back"
				type="button"> <input class="btn btn-primary"
				id="btnWizardNext" value="Next" type="button"> <br>
		</div>
		<!-- /well -->

		<hr>

	</div>

</div>
{{ end }}
